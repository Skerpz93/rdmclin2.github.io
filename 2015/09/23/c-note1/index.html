<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 编程珠玑课后习题 第一章 · Mcl's space</title><meta name="description" content="编程珠玑课后习题 第一章 - LinChen"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/rdmclin2" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/rdmclin2" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="http://www.jianshu.com/users/34733105f724/latest_articles" target="_blank" class="nav-list-link">JIANSHU</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">编程珠玑课后习题 第一章</h1><div class="post-time">Sep 23, 2015</div><div class="post-content"><blockquote>
<p>很久没碰c语言，基本语法都忘了，最近看编程珠玑，想用c语言写，顺便复习一下，过了这么长时间再碰c，应该会有不同的理解。下面是第一章的有编程的习题。</p>
</blockquote>
<a id="more"></a>
<h2 id="(1)_使用c库函数qsort排序random出来的99999个整数">(1) 使用c库函数qsort排序random出来的99999个整数</h2><p>首先我们用rand函数产生n个待排序的数，写入文件中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* random_file.c&#10; * author: CalvinMeng&#10; * usage: ./random_file &#60;intput file&#62;&#10;*/&#10;#include &#60;stdio.h&#62;&#10;#include &#60;stdlib.h&#62;&#10;&#10;int main()&#123;&#10;&#9;int i,n;&#10;&#9;scanf(&#34;%d&#34;,&#38;n);&#10;&#9;for(i = 0 ; i &#60; n; i++)&#123;&#10;&#9;&#9;printf(&#34;%d\n&#34;, rand()%100000 );&#10;&#9;&#125;&#10;&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后用qsort函数对输入的数进行排序<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* random_file.c&#10; * author: CalvinMeng&#10; * usage: ./qsort &#60;intput file&#62;&#10;*/&#10;#include &#60;stdio.h&#62;&#10;#include &#60;stdlib.h&#62;&#10;&#10;// &#35268;&#23450;&#35813;&#20989;&#25968;&#21482;&#33021;&#36820;&#22238;int&#10;int intcomp(const void *x,const void *y)&#123;&#10;&#9;return (*(int*)x) - (*(int *)y);&#10;&#125;&#10;&#10;int a[100000];&#10;&#10;int main(void)&#123;&#10;&#9;int i ,n = 0;&#10;&#9;while(scanf(&#34;%d&#34;,&#38;a[n]) != EOF)&#123;&#10;&#9;&#9;n++;&#10;&#9;&#125;&#10;&#9;qsort(a,n,sizeof(int),intcomp);&#10;&#9;for(i = 0; i &#60; n ;i++)&#123;&#10;&#9;&#9;printf(&#34;%d\n&#34;,a[i]);&#10;&#9;&#125;&#10;&#9;return 0;&#10;&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后编译,调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ echo 99999 &#62; input.txt&#10;$ ./random_file &#60; input.txt | ./qsort &#62;output.txt</span><br></pre></td></tr></table></figure></p>
<h2 id="(2)_用位逻辑运算来实现位向量">(2) 用位逻辑运算来实现位向量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* bitmap.c&#10; * author: CalvinMeng&#10; * usage: ./bitmap&#10;*/&#10;#include &#60;stdio.h&#62;&#10;&#10;#define BITSPERWORD  32&#10;#define SHIFT 5&#10;#define N 10000000&#10;#define MASK 0x1F&#10;&#10;int a[1 + N/BITSPERWORD];&#10;&#10;void set(int i)&#123;&#10;&#9;a[i &#62;&#62; SHIFT] |= (1 &#60;&#60; (i &#38; MASK));&#10;&#125;&#10;&#10;void clear (int i)&#123;&#10;&#9;a[i &#62;&#62; SHIFT] &#38;= ~(1 &#60;&#60; (i &#38; MASK));&#10;&#125;&#10;&#10;int test(int i)&#123;&#10;&#9;return a[i &#62;&#62; SHIFT] &#38; (1 &#60;&#60; (i &#38; MASK));&#10;&#125;&#10;&#10;int main()&#123;&#10;&#9;int indent = 16;&#10;&#9;set(indent);&#10;&#9;printf(&#34;%d\n&#34;,test(indent));&#10;&#9;clear(indent);&#10;&#9;printf(&#34;%d\n&#34;,test(indent));&#10;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="(3)_位图排序">(3) 位图排序</h2><p>首先产生1000000个随机数,这里就不严格限制必须不重复了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* random_file.c&#10; * author: CalvinMeng&#10; * usage: ./random_file &#60;intput file&#62;&#10;*/&#10;#include &#60;stdio.h&#62;&#10;#include &#60;stdlib.h&#62;&#10;&#10;#define N 10000000&#10;&#10;int main()&#123;&#10;&#9;int i,n;&#10;&#9;scanf(&#34;%d&#34;,&#38;n);&#10;&#9;for(i = 0 ; i &#60; n; i++)&#123;&#10;&#9;&#9;printf(&#34;%d\n&#34;, rand()%N );&#10;&#9;&#125;&#10;&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后将这些数进行bit排序<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* bitmap_sort.c&#10; * author: CalvinMeng&#10; * usage: ./bitmap_sort inputfile&#10;*/&#10;#include &#60;stdio.h&#62;&#10;&#10;#define BITSPERWORD  32&#10;#define SHIFT 5&#10;#define N 10000000&#10;#define MASK 0x1F&#10;&#10;int a[1 + N/BITSPERWORD];&#10;&#10;void set(int i)&#123;&#10;    a[i &#62;&#62; SHIFT] |= (1 &#60;&#60; (i &#38; MASK));&#10;&#125;&#10;&#10;void clear (int i)&#123;&#10;    a[i &#62;&#62; SHIFT] &#38;= ~(1 &#60;&#60; (i &#38; MASK));&#10;&#125;&#10;&#10;int test(int i)&#123;&#10;    return a[i &#62;&#62; SHIFT] &#38; (1 &#60;&#60; (i &#38; MASK));&#10;&#125;&#10;&#10;int main()&#123;&#10;    int number = 0;&#10;    while(scanf(&#34;%d&#34;,&#38;number) != EOF)&#123;&#10;        set(number);&#10;    &#125;&#10;    for (int i = 0; i &#60; N; ++i)&#10;    &#123;&#10;        if(test(i))&#123;&#10;            printf(&#34;%d\n&#34;, i);&#10;        &#125;&#10;    &#125;&#10;    return 0;&#10;&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后编译,调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ echo 1000000 &#62; input.txt&#10;$ ./random_file &#60; input.txt | ./bitmap_sort &#62; output.txt</span><br></pre></td></tr></table></figure></p>
<p>原书上说10秒，现在机器那么快，大概不到1秒就搞定了。</p>
<h2 id="(4)_生成小于n但不重复的k个数字">(4) 生成小于n但不重复的k个数字</h2><p>噗,本来第三个题目想绕过去的，看来还是绕不过去,我一开始的想法是，例如N为10000000,K为1000000，相除为10，<br>那么设置random时候每次返回0-9的一个数,输出累计的数，这种方法是能够生成随机的100万的数，但随机出来的数的范围基本在500万左右。<br>不符合题意。下面给出答案的程序:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* random_k.c&#10; * author: CalvinMeng&#10; * usage: ./random_k &#60;intput file&#62;&#10;*/&#10;#include &#60;stdio.h&#62;&#10;#include &#60;stdlib.h&#62;&#10;&#10;#define N 10000000&#10;#define K 1000000&#10;&#10;int a[N+1];&#10;&#10;&#10;int randint(int l,int r)&#123;&#10;    if(r &#60; l) return 0;&#10;    return l+rand() % (r-l);&#10;&#125;&#10;&#10;void swap (int l, int r)&#123;&#10;    int temp = a[l];&#10;    a[l] = a[r];&#10;    a[r] = temp;&#10;&#125;&#10;&#10;&#10;int main()&#123;&#10;  int i;&#10;  for(i=0; i &#60; N; ++i)&#123;&#10;      a[i] = i;&#10;  &#125;&#10;  for(i = 0; i &#60; K; ++i)&#123;&#10;      swap(i,randint(i,N-1));&#10;      printf(&#34;%d\n&#34;,a[i]);&#10;  &#125;&#10;  return 0;&#10;&#125;</span><br></pre></td></tr></table></figure></p>
</div></article></div></section><footer><div class="paginator"><a href="/2015/09/28/ionic-develop-sass/" class="prev">上一篇</a><a href="/2015/09/16/docker-file-note/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'mcl';
var disqus_identifier = '2015/09/23/c-note1/';
var disqus_title = '编程珠玑课后习题 第一章';
var disqus_url = 'http://www.mclspace.com/2015/09/23/c-note1/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//mcl.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2016 <a href="http://www.mclspace.com">LinChen</a>, unless otherwise noted.</p></div></footer><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?6b26d13232555e4d64b5a8c3567ccda9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>